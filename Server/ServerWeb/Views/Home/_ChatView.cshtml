@using ChatCore.Engine
@model ChatViewModel

<div class="card-header msg_head">
    <div class="d-flex bd-highlight">
        <div class="img_cont">
            <img identicon-value="Model.ReceiverUser.UserName" class="rounded-circle user_img" />
            <span class="online_icon"></span>
        </div>
        <div class="user_info">
            <span>Chat with @Model.ReceiverUser.UserName</span>
            <p>@Model.ChatObjects.Count Messages</p>
        </div>
    </div>
    <span id="action_menu_btn"><i class="fas fa-ellipsis-v"></i></span>
    <div class="action_menu">
        <ul>
            <li><i class="fas fa-user-circle"></i> View profile</li>
            <li><i class="fas fa-users"></i> Add to close friends</li>
            <li><i class="fas fa-plus"></i> Add to group</li>
            <li><i class="fas fa-ban"></i> Block</li>
        </ul>
    </div>
</div>
<div id="messageContainer" class="card-body msg_card_body">
    @foreach (var item in Model.ChatObjects.OrderBy(x=>x.CreatedOn))
    {
        if (item.SenderName == Model.CurrentUser.UserName)
        {
            @await Html.PartialAsync("_senderChat", item);
        }
        else
        {
            @await Html.PartialAsync("_receiverChat", item);
        }
    }
</div>
<div class="card-footer">
    <div class="input-group">
        <div class="input-group-append">
            <span class="input-group-text attach_btn"><i class="fas fa-paperclip"></i></span>
        </div>
        <textarea id="MessageField" name="" class="form-control type_msg" placeholder="Type your message..."></textarea>
        <div class="input-group-append">
            <button id="sendButton" class="input-group-text send_btn">
                <i class="fas fa-location-arrow"></i>
            </button>
        </div>
    </div>
</div>

